(this.webpackJsonpfrnlencastore=this.webpackJsonpfrnlencastore||[]).push([[0],{40:function(e,t,a){e.exports=a(78)},45:function(e,t,a){},46:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),c=a.n(o),i=(a(45),a(13)),l=a(19),s=a(4),u=a(5),h=a(7),m=a(6),d=a(1),p=a(8),g=(a(46),a(3)),f=a(17),b=function(e){var t=e.component,a=e.auth,n=Object(l.a)(e,["component","auth"]);return r.a.createElement(f.b,Object.assign({},n,{render:function(e){return a.isLogged?r.a.createElement(t,Object.assign({},e,{auth:a})):r.a.createElement(f.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},v=a(23),E=a.n(v),C=E.a.create();C.defaults.headers.common["cache-control"]="no-cache",C.defaults.headers.post["Content-Type"]="no-cache",C.defaults.headers.put["Content-Type"]="no-cache";var j=C,O=E.a.create();O.defaults.headers.common["cache-control"]="no-cache",O.defaults.headers.post["Content-Type"]="no-cache",O.defaults.headers.put["Content-Type"]="no-cache";var k=function(e){O.defaults.headers.common.Authorization="Bearer ".concat(e)},w=O,y=function(){try{return localStorage.setItem("t","t"),localStorage.removeItem("t"),!0}catch(e){return!1}}(),L=function(e,t){return!!y&&(localStorage.setItem(e,t),!0)},S=function(e){return y?localStorage.getItem(e):null},I=function(e){return!!y&&(localStorage.removeItem(e),!0)},N=(a(69),function(e){var t=e.children,a=e.title,n=e.login||function(e){};return r.a.createElement("h1",{onClick:function(e){n(e,{email:"obetancourthunicah@gmail.com",id:"Orlando",roles:["public","admin"]})}},a," ",t)}),A=a(11),T=(a(70),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={counter:0},e.counterUpdate=e.counterUpdate.bind(Object(d.a)(e)),e.logoutOnClick=e.logoutOnClick.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"counterUpdate",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({counter:this.state.counter+1})}},{key:"logoutOnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.auth.logout()}},{key:"render",value:function(){return this.props.hide?null:this.props.auth&&this.props.auth.isLogged?r.a.createElement("footer",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(g.c,{to:"/"},r.a.createElement(A.b,null),"Home")),r.a.createElement("li",null,r.a.createElement(g.c,{to:"/productos"},r.a.createElement(A.a,null)," Products")),r.a.createElement("li",null,r.a.createElement(g.c,{to:"/signin"},r.a.createElement(A.e,null)," Orders")),r.a.createElement("li",null,r.a.createElement("a",{onClick:this.logoutOnClick},r.a.createElement(A.e,null)," Logout"))))):r.a.createElement("footer",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(g.c,{to:"/"},r.a.createElement(A.b,null),"Home")),r.a.createElement("li",null,r.a.createElement(g.c,{to:"/login"},r.a.createElement(A.e,null)," Login")),r.a.createElement("li",null,r.a.createElement(g.c,{to:"/signin"},r.a.createElement(A.e,null)," SignIn")))))}}]),t}(n.Component)),H=(a(71),function(e){var t=e.pageTitle,a=e.hideFooter,n=e.children,o=e.auth,c=a||!1;return r.a.createElement("section",{className:"page"},r.a.createElement(N,null,t||"Page"),r.a.createElement("main",null,n),c?null:r.a.createElement(T,{auth:o}))}),M=function(e){var t=e.auth;return r.a.createElement(H,{pageTitle:"Home Page",auth:t},r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minus, quia vel? Iure eaque ipsam, magni animi debitis sapiente consequuntur quos repudiandae. Consequatur perferendis accusantium voluptatum harum, aliquid dolor repellendus facere."))},D=a(14),x=(a(72),function(e){var t=e.name,a=e.value,n=e.type,o=e.caption,c=e.onChange,i=e.error;return r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:t},o),r.a.createElement("input",{type:n||"text",name:t,id:t,value:a,onChange:c||function(e){return!1}}),i?r.a.createElement("span",{className:"error"},i):null)}),P=(a(73),function(e){var t=e.children;return r.a.createElement("fieldset",{className:"action"},t)}),U=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,R=/^\s?$/,F=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={email:"",emailError:null,password:"",passwordError:null,redirecTo:!1},e.onChangeHandler=e.onChangeHandler.bind(Object(d.a)(e)),e.onClickLogin=e.onClickLogin.bind(Object(d.a)(e)),e.onClickCreateAccount=e.onClickCreateAccount.bind(Object(d.a)(e)),e.validate=e.validate.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"validate",value:function(e){var t=null,a=[],n=e.email,r=e.password;return void 0!==n&&(U.test(n)||a.push("El correo debe tener formato correcto"),/^\s*$/.test(n)&&a.push("Debe Ingresar Correo Adecuado"),a.length&&(t=Object.assign({},t,{emailError:a.join(". ")}))),void 0!==r&&(a=[],R.test(r)&&a.push("Debe Ingresar Contrase\xf1a Adecuado"),a.length&&(t=Object.assign({},t,{passwordError:a.join(". ")}))),t}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value,r=this.validate(Object(D.a)({},a,n));r||(r=Object(D.a)({},a+"Error","")),this.setState(Object(i.a)({},this.state,Object(D.a)({},a,n),r))}},{key:"onClickLogin",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.validate(this.state);if(a)this.setState(Object(i.a)({},this.state,{},a));else{alert(JSON.stringify(this.state));var n=this.state,r=n.email,o=n.password;j.post("/api/seguridad/login",{userEmail:r,userPswd:o}).then((function(e){console.log(e.data),t.props.login(e.data),t.setState(Object(i.a)({},t.state,{redirecTo:!0}))})).catch((function(e){console.log(e)}))}}},{key:"onClickCreateAccount",value:function(e){e.preventDefault(),e.stopPropagation(),alert("Click en Crear Cuenta")}},{key:"render",value:function(){if(this.state.redirecTo){var e=this.props.location.state?this.props.location.state.from.pathname:"/";return r.a.createElement(f.a,{to:e})}return r.a.createElement(H,{pageTitle:"Iniciar",auth:this.props.auth},r.a.createElement(x,{name:"email",caption:"Correo",value:this.state.email,type:"text",onChange:this.onChangeHandler,error:this.state.emailError}),r.a.createElement(x,{name:"password",caption:"Contrase\xf1a",value:this.state.password,type:"password",onChange:this.onChangeHandler,error:this.state.passwordError}),r.a.createElement(P,null,r.a.createElement("button",{onClick:this.onClickLogin},"Iniciar Sesi\xf3n"),r.a.createElement("button",{onClick:this.onClickCreateAccount},"Crear Cuenta")))}}]),t}(n.Component),q=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={userName:"",userNameError:null,email:"",emailError:null,password:"",passwordError:null},e.onChangeHandler=e.onChangeHandler.bind(Object(d.a)(e)),e.onClickLogin=e.onClickLogin.bind(Object(d.a)(e)),e.onClickCreateAccount=e.onClickCreateAccount.bind(Object(d.a)(e)),e.validate=e.validate.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"validate",value:function(e){var t=null,a=[],n=e.email,r=e.password;return void 0!==n&&(U.test(n)||a.push("El correo debe tener formato correcto"),/^\s*$/.test(n)&&a.push("Debe Ingresar Correo Adecuado"),a.length&&(t=Object.assign({},t,{emailError:a.join(". ")}))),void 0!==r&&(a=[],R.test(r)&&a.push("Debe Ingresar Contrase\xf1a Adecuado"),a.length&&(t=Object.assign({},t,{passwordError:a.join(". ")}))),t}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value,r=this.validate(Object(D.a)({},a,n));r||(r=Object(D.a)({},a+"Error","")),this.setState(Object(i.a)({},this.state,Object(D.a)({},a,n),r))}},{key:"onClickCreateAccount",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.validate(this.state);if(t)this.setState(Object(i.a)({},this.state,{},t));else{var a=this.state,n=a.email,r=a.password,o=a.userName;j.post("/api/seguridad/users/new",{useremail:n,userpswd:r,usernames:o}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}},{key:"onClickLogin",value:function(e){e.preventDefault(),e.stopPropagation(),alert("Click en Login")}},{key:"render",value:function(){return r.a.createElement(H,{pageTitle:"Nueva Cuenta",auth:this.props.auth},r.a.createElement(x,{name:"userName",caption:"Nombre Completo",value:this.state.userName,type:"text",onChange:this.onChangeHandler,error:this.state.userNameError}),r.a.createElement(x,{name:"email",caption:"Correo",value:this.state.email,type:"text",onChange:this.onChangeHandler,error:this.state.emailError}),r.a.createElement(x,{name:"password",caption:"Contrase\xf1a",value:this.state.password,type:"password",onChange:this.onChangeHandler,error:this.state.passwordError}),r.a.createElement(P,null,r.a.createElement("button",{onClick:this.onClickCreateAccount},"Crear Cuenta"),r.a.createElement("button",{onClick:this.onClickLogin},"Iniciar Sesi\xf3n")))}}]),t}(n.Component),z=a(38),B=a.n(z),$=(a(75),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={items:[],hasMore:!0,page:1,itemsToLoad:10},e.loadMore=e.loadMore.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loadMore",value:function(e){var t=this,a=this.state.itemsToLoad,n="/api/artesanos/products/".concat(e,"/").concat(a);w.get(n).then((function(n){var r=n.data;console.log(r);var o=r.products,c=r.total,i=t.state.items;o.map((function(e){return i.push(e)})),c?t.setState({items:i,hasMore:e*a<c}):t.setState({hasMore:!1})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.items.map((function(e){return r.a.createElement("div",{className:"listItem",key:e._id},r.a.createElement("span",null,e.sku," ",e.name),r.a.createElement("span",{className:"updateListItem"},r.a.createElement(g.b,{to:"/producto/".concat(e._id)},r.a.createElement(A.d,{size:"2em"})),r.a.createElement(g.b,{to:"/producto/img/".concat(e._id)},r.a.createElement(A.c,{size:"2em"}))))}));return t.length||t.push(r.a.createElement("div",{className:"listItem",key:"pbListAddOne"},r.a.createElement("span",null,"Nuevo Item"),r.a.createElement(g.b,{to:"/changeThis"},r.a.createElement(A.g,{size:"2.5em"})))),r.a.createElement(H,{title:"My List Change This",auth:this.props.auth},r.a.createElement("div",{className:"list",ref:function(t){return e.scrollParentRef=t}},r.a.createElement(B.a,{pageStart:0,loadMore:this.loadMore,hasMore:this.state.hasMore,useWindow:!1,threshold:108,getScrollParent:function(){return e.scrollParentRef},loader:r.a.createElement("div",{key:"pbListLoading",className:"listItem center"},r.a.createElement(A.f,null))},t)))}}]),t}(n.Component)),_=(a(76),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={},e.addMoreStock=e.addMoreStock.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;w.get("/api/artesanos/products/find/".concat(t)).then((function(t){e.setState(t.data)})).catch((function(e){console.log(e)}))}},{key:"addMoreStock",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.props.match.params.id;w.put("/api/artesanos/products/stock/".concat(a),{stock:1}).then((function(e){t.setState(e.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(!this.props.match.params.id)return r.a.createElement(f.a,{to:"/productos"});var e=this.state,t=e.sku,a=e.price,n=e.stock,o=e.name,c=e.imgUrl;return r.a.createElement(H,{pageTitle:t,auth:this.props.auth},r.a.createElement("span",{className:"detailitem"},t),r.a.createElement("span",{className:"detailitem"},o),r.a.createElement("span",{className:"detailitem"},a),r.a.createElement("span",{className:"detailitem"},n),r.a.createElement("img",{className:"detailimg",src:c}),r.a.createElement("fieldset",null,r.a.createElement("button",{onClick:this.addMoreStock},"Add One more Stock +")))}}]),t}(n.Component)),W=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(m.a)(t).call(this))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(H,{auth:this.props.auth,pageTitle:"Nuevo"})}}]),t}(n.Component),J=a(39),G=a.n(J),K=a(24),Q=a.n(K),V=(a(77),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).handleFile=function(t){var a=new FileReader;a.onloadend=function(){e.setState({src:a.result})},a.readAsDataURL(t.target.files[0])},e.onImageLoaded=function(t){e.imageRef=t},e.onCropChange=function(t){e.setState({crop:t})},e.onCropComplete=function(t){if(e.imageRef&&t.width&&t.height){var a=e.getCroppedImg(e.imageRef,t);e.setState({croppedImageUrl:a})}},e.clickHandler=function(t){t.preventDefault(),t.stopPropagation();var a=e.props.match.params.id;w.put("/api/artesanos/products/updimg/".concat(a),{imageurl:e.state.croppedUrl}).then((function(t){e.setState({redirect:!0})})).catch((function(e){console.log(e)}))},e.state={src:null,crop:{unit:"%",width:30,aspect:1},croppedImageUrl:null,croppedUrl:null,redirect:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getCroppedImg",value:function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;a.width=t.width,a.height=t.height;var o=a.getContext("2d"),c=this;Q.a.getData(e,(function(){switch(Q.a.getAllTags(this).Orientation){case 2:o.transform(-1,0,0,1,t.width,0);break;case 3:o.transform(-1,0,0,-1,t.width,t.height);break;case 4:o.transform(1,0,0,-1,0,t.height);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,t.height,0);break;case 7:o.transform(0,-1,-1,0,t.height,t.width);break;case 8:o.transform(0,-1,1,0,0,t.width);break;default:o.transform(1,0,0,1,0,0)}o.drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height);var i=new FileReader;a.toBlob((function(e){i.readAsDataURL(e),i.onloadend=function(){c.dataURLtoFile(i.result,"cropped.jpg")}}))}))}},{key:"dataURLtoFile",value:function(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),o=r.length,c=new Uint8Array(o);o--;)c[o]=r.charCodeAt(o);var i=new File([c],t,{type:n});this.setState({croppedImage:i,croppedUrl:e})}},{key:"render",value:function(){var e=this.props.match.params.id;if(this.state.redirect)return r.a.createElement(f.a,{to:"/producto/".concat(e)});var t=this.state,a=t.crop,n=t.profile_pic,o=t.src,c=t.croppedUrl;return r.a.createElement(H,{auth:this.props.auth,pageTitle:"Subir Im\xe1gen"},e,r.a.createElement("input",{type:"file",id:"profile_pic",value:n,onChange:this.handleFile}),o&&r.a.createElement(G.a,{src:o,crop:a,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),r.a.createElement("button",{onClick:this.clickHandler},"save"),c&&r.a.createElement("img",{src:c}))}}]),t}(n.Component)),X=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={user:S("user")||{},jwt:S("jwt")||"",isLogged:!1,loadingBackend:!1},""!==e.state.jwt&&(e.state.isLogged=!0,k(e.state.jwt)),e.login=e.login.bind(Object(d.a)(e)),e.logout=e.logout.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"login",value:function(e){var t=e.jwt,a=Object(l.a)(e,["jwt"]);this.setState(Object(i.a)({},this.state,{isLogged:!0,loadingBackend:!1,user:a,jwt:t})),k(t),L("jwt",t),L("user",a)}},{key:"logout",value:function(){I("jwt"),I("user"),this.setState(Object(i.a)({},this.state,{isLogged:!1,user:{},jwt:""}))}},{key:"render",value:function(){var e=this,t={isLogged:this.state.isLogged,user:this.state.user,logout:this.logout};return console.log(t),r.a.createElement(g.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(f.d,null,r.a.createElement(f.b,{render:function(e){return r.a.createElement(M,Object.assign({},e,{auth:t}))},path:"/",exact:!0}),r.a.createElement(f.b,{render:function(a){return r.a.createElement(F,Object.assign({},a,{auth:t,login:e.login}))},path:"/login",exact:!0}),r.a.createElement(f.b,{render:function(e){return r.a.createElement(q,Object.assign({},e,{auth:t}))},path:"/signin",exact:!0}),r.a.createElement(b,{component:M,path:"/privatehome",exact:!0,auth:t}),r.a.createElement(b,{component:$,path:"/productos",exact:!0,auth:t}),r.a.createElement(b,{component:W,path:"/producto/new",exact:!0,auth:t}),r.a.createElement(b,{component:_,path:"/producto/:id",exact:!0,auth:t}),r.a.createElement(b,{component:V,path:"/producto/img/:id",exact:!0,auth:t}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.c959851b.chunk.js.map